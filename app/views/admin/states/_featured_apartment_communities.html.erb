<a name="featured_apartment_communities"></a>
<div class="box_relationships" id="featured_apartment_communities">
  <h2>
    <a href="/admin/apartment_communities">Featured Apartment Communities</a>
  </h2>
  
  <% form_tag :action => 'relate', :id => @item.id do %>
    <%= hidden_field :related, :relation, :value => 'featured_apartment_communities' %>
    <%= hidden_field :related, :model, :value => ApartmentCommunity %>
    <p>
      <%= select :related, :id, 
            (@item.apartment_communities - @item.featured_apartment_communities).collect { |f|
              [f.to_label, f.id] }.sort_by { |e| e.first } %>
      &nbsp;
      <%= submit_tag _("Add"), :class => 'button' %>
    </p>
  <% end %>
  
  <%- if @item.featured_apartment_communities.count > 0 -%>
    <%= build_list(ApartmentCommunity, ApartmentCommunity.typus_fields_for(:state),
          @item.featured_apartment_communities, ApartmentCommunity.name.tableize,
          {}, :has_many, 'featured_apartment_communities') %>
  <%- else -%>
    <div id="flash" class="notice"><p>There are no featured apartment communities</p></div>
  <%- end -%>
</div>
