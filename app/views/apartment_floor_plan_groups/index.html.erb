<% content_for :body_class do %>community property floor-plans<% end %>
<% render_meta(@community, :floor_plans) %>

<% @groups.each do |group| %>
  <% plans_in_group = @community.floor_plans.in_group(group) %>

  <% if plans_in_group.any? %>
    <div id="<%= dom_id(group) %>" class="floor-plan-group">
      <h2>
        <%= group.name %>
        <% if @community.availability_url.present? && plans_in_group.count > ApartmentFloorPlanGroup::DISPLAY_LIMIT %>
          <em>
            <%= floor_plan_group_link(@community, group, plans_in_group.first.bedrooms) %>
          </em>
        <% end %>
      </h2>

      <% plans_in_group.take(ApartmentFloorPlanGroup::DISPLAY_LIMIT).in_groups_of(4, false) do |plans_group| %>
        <ul class="row">
          <% plans_group.each do |plan| %>
            <li class="floor-plan">
              <h4><%= plan.name %></h4>

              <p>
                Starting from <%= square_feet(plan) %> |
                <%= floor_plan_price(plan.min_rent) %><br />
                <%= link_to 'Reserve', plan.availability_url, :rel => 'external' %>
              </p>

              <%= floor_plan_image(plan) %>
            </li>
          <% end %>
        </ul>
      <% end %>

    </div>
  <% end %>
<% end %>
